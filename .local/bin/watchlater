#!/bin/sh

source_dir="/mnt/media_files/tv"
watchlist="$HOME/Videos/Watchlist"
music="$HOME/Music"

# Move videos to Watchlater
find "$source_dir" -type f \( -iname "*.mp4" -o -iname "*.mkv" \) -exec mv {} "$watchlist" \;

# Move directories containing audio into Music
find "$source_dir" -mindepth 1 -type d \( -execdir test -f {}/*.mp3 \; -o -execdir test -f {}/*.flac \; -o -execdir test -f {}/*.m4b \; \) -exec mv {} "$music" \;

# Delete empty directories
find "$source_dir" -type d -empty -delete
