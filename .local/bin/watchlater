#!/bin/sh

source_dir="/mnt/media_files/tv"
watchlist="$HOME/Videos/Watchlist"
music="$HOME/Music"

# Move videos to Watchlater
find "$source_dir" -type f \( -iname "*.mp4" -o -iname "*.mkv" \) -exec mv {} "$watchlist" \;

# Move directories containing audio into Music
find "$source_dir" -mindepth 1 -depth -type d -exec sh -c 'if find "$0" -type f -iname "*.mp3" -o -iname "*.m4b" -o -iname "*.flac" -o -iname "*.m4a" -o -iname "*.opus"; then mv "$0" "$music"; fi' {} \;

# Delete empty directories
find "$source_dir" -type d -empty -delete
