#!/bin/sh

# Options
dir="/tmp"
opts="--no-playlist -o $dir/video"
filename="$dir/video*"
player="xdg-open"

set -e

# Get URL from clipboard if run without argument:
if [ -z "$1" ]; then
  url="$(xclip -o)"
else
  url="$1"
fi

# Download video
yt-dlp "$opts" "$url" >/dev/null 2>&1

# Play video
"setsid" "$player" "$filename" >/dev/null 2>&1

# Delete video
rm "$filename"
