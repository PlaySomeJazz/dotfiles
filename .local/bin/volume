#!/bin/sh
status=$(wpctl get-volume @DEFAULT_AUDIO_SINK@)
if echo "$status" | grep -q "MUTED"; then
    ICON="mute.svg"; TEXT="Muted"
else
    set -- $status; VOLUME=$(printf "%.0f" "$(echo "$2 * 100" | bc)")
    [ "$VOLUME" -lt 33 ] && ICON="low.svg" || [ "$VOLUME" -lt 66 ] && ICON="medium.svg" || ICON="high.svg"
    TEXT="${VOLUME}%"
fi
dunstify -a "Volume" -u low -r 9993 -h int:value:"$VOLUME" -i "$PIX/volume-$ICON" "Volume" "$TEXT" -t 2000
