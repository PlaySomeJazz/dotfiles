#!/bin/sh
case $1 in
    up) wpctl set-volume -l 2.0 @DEFAULT_AUDIO_SINK@ 3%+ ;;
    down) wpctl set-volume -l 2.0 @DEFAULT_AUDIO_SINK@ 3%- ;;
    jumpup) wpctl set-volume -l 2.0 @DEFAULT_AUDIO_SINK@ 15%+ ;;
    jumpdown) wpctl set-volume -l 2.0 @DEFAULT_AUDIO_SINK@ 15%- ;;
    mute) wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle ;;
esac
if wpctl get-volume @DEFAULT_AUDIO_SINK@ | grep -q "MUTED"; then ICON="mute.svg"; TEXT="Muted"
else
    VOLUME=$(wpctl get-volume @DEFAULT_AUDIO_SINK@ | awk '{print int($2 * 100)}')
    [ "$VOLUME" -lt 33 ] && ICON="low.svg" || [ "$VOLUME" -lt 66 ] && ICON="medium.svg" || ICON="high.svg"
    TEXT="${VOLUME}%"
fi
dunstify -a "Volume" -u low -r 9993 -h int:value:"$VOLUME" -i "$PIX/volume-$ICON" "Volume" "$TEXT" -t 2000
