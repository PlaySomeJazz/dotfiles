#!/bin/sh

T='
https://ngosang.github.io/trackerslist/trackers_best.txt
'

if ! pidof transmission-daemon >/dev/null
then
	transmission-daemon
	notify-send -i $PIX/transmission.svg Starting...
	sleep 3
	transmission-remote --blocklist-update
fi

t=`curl -sLZ $T | sort -u`

for i do
	case $i in
	magnet:\?*)
		for tr in $t; do
			i="${i}&tr=${tr}"
		done
	esac
	n=`transmission-remote -a "$i"`
	n=${n##*\"name\":\"} n=${n%\"*}
	notify-send -i $PIX/transmission.svg Added "${n}"
	pkill -12 status
done
